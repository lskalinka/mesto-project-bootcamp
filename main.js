(()=>{"use strict";var e=function(e){return e.some((function(e){return!e.validity.valid}))},t=Array.from(document.querySelectorAll(".element")),n=document.querySelector("#element_template").content,o=document.querySelector(".elements");function r(e,t){var r=function(e,t){var o=n.querySelector(".element").cloneNode(!0),r=o.querySelector(".element__like");r.addEventListener("click",(function(){r.classList.toggle("element__like-active")}));var c=o.querySelector(".element__delbutton");return c.addEventListener("click",(function(){c.closest(".element").remove()})),o.querySelector(".element__image").addEventListener("click",(function(){var n,o;n=t,o=e,_(document.getElementById("popup__img")),m.src=n,m.alt="Фото: "+o,f.textContent=o})),o.querySelector(".element__image").src=t,o.querySelector(".element__name").textContent=e,l(o),o}(e,t);o.insertBefore(r,o.firstElementChild)}function l(e){e.children[0].alt="Фото: "+e.children[2].children[0].textContent}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){r(e.name,e.link)})),t.forEach((function(e){l(e)}));var c=document.querySelectorAll(".popup__closebutton"),d=document.getElementById("profile__name"),s=document.getElementById("popup__editname"),u=document.getElementById("profile__spec"),i=document.getElementById("popup__editspec"),p=document.getElementById("popup__cardname"),a=document.getElementById("popup__cardurl"),m=document.querySelector(".popup__fullimage"),f=document.querySelector(".popup__imgcaption");function _(e){e.classList.add("popup_opened"),document.addEventListener("keydown",y),e.addEventListener("click",E)}function v(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",y),e.removeEventListener("click",E)}function y(e){"Escape"===e.key&&v(document.querySelector(".popup_opened"))}function E(e){e.target===e.currentTarget&&v(document.querySelector(".popup_opened"))}c.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return v(t)}))}));var g,k=document.getElementById("addCard"),S=document.forms.addCard,q=document.getElementById("editProfile"),C=document.forms.editProfile;g={formInput:".popup__edit",formFieldset:".popup__fieldset",submitButtonSelector:".popup__button",inputErrorClass:"popup__edit_type_error",errorActiveClass:"popup__edit-error_active",formField:".popup__form-field",errorClass:".popup__edit-error"},Array.from(document.querySelectorAll(g.formInput)).forEach((function(t){t.addEventListener("input",(function(){!function(t,n){t.closest(n.formFieldset).querySelector(n.submitButtonSelector).disabled=!1;var o,r,l=t.closest(n.formField).querySelector(n.errorClass);t.validity.valid?function(e,t,n){e.classList.remove(n.inputErrorClass),t.textContent="",t.classList.remove(n.errorActiveClass)}(t,l,n):(function(e,t,n,o){e.classList.add(o.inputErrorClass),n.textContent=t,n.classList.add(o.errorActiveClass)}(t,t.validationMessage,l,n),t.closest(n.formFieldset).querySelector(n.submitButtonSelector).disabled=!0),o=Array.from(t.closest(n.formFieldset).querySelectorAll(n.formInput)),r=t.closest(n.formFieldset).querySelector(n.submitButtonSelector),console.log(e(o)),e(o)?r.disabled=!0:r.disabled=!1}(t,g)}))})),S.addEventListener("submit",(function(e){e.preventDefault(),""!==p.value&&""!==a.value&&(r(p.value,a.value),e.target.reset())})),k.addEventListener("click",(function(){_(document.getElementById("popup__card"))})),q.addEventListener("click",(function(){_(document.getElementById("popup__profile")),s.value=d.textContent,i.value=u.textContent})),C.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=s.value,u.textContent=i.value,v(document.getElementById("popup__profile"))}))})();